+++
author = "coucou"
title = "单片机 笔记"
date = "2022-05-01"
description = "单片机散知识"
tags = [
    "单片机"
]
+++

## 单片机

### 1. 输入输出以及复用模式

#### 1.1 输入

（1）输入上拉：默认输入高电平

（2）输入下拉：默认输入低电平

（3）浮空输入：不稳定

（4）模拟输入：如AD模拟信号

#### 1.2输出

（1）推挽输出：P-MOS和N-MOS均有效，高低电平均有较强驱动能力

（2）开漏输出：N-MOS有效，低电平有较强的驱动能力

​																										补充：TTL 是斯密特触发器：防止信号不稳定	

### 2. 初始化过程

（1）使能IO口时钟

（2）初始化IO口模式

（3）操作IO

### 3. 通信

|  形式  |         IO口         |     方式     |
| :----: | :------------------: | :----------: |
|  UART  |       TXD，RXD       | 全双工，异步 |
|  I2C   |       SCL，SDA       | 半双工，同步 |
|  SPI   | SCLK，MOSI，MISO，CS | 全双工，同步 |
| 1-wire |          DQ          | 半双工，异步 |

（1）全双工：同一时刻可互传数据

（2）半双工：同一时刻不可互传数据

（3）同步：双方靠一根时钟线来约定通信速率

（4）异步：双方各自约定通信速率 

### 4. 单片机使用printf()

> 使用之前，一定要将配置里的【use microlLIB】选项卡勾上！不然用不了！！

```c
#include "stdio.h"

int fputc(int ch, FILE *f)
{ 	
	while((USART1->SR & 0X40)==0);//循环发送,直到发送完毕   
	USART1->DR = (u8) ch;      
	return ch;
}
```



